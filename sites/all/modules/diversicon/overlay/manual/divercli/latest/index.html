<!DOCTYPE html>
<html>
    <head>
        <title>DiverCLI</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link id="josman-stylesheet" rel="stylesheet" type="text/css" href="../css/josman.css">
        <!-- <link id="bootstrap-stylesheet" rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
        <link id="bootstrap-theme-stylesheet" rel="stylesheet" type="text/css" href="../css/bootstrap-theme.min.css">
        -->
        <link rel="stylesheet" type="text/css" href="website-template/css/josman.css"> 
        <!--
        <link  rel="stylesheet" type="text/css" href="website-template/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="website-template/css/bootstrap-theme.min.css">
        -->
    </head>
    <body>
        <div id="josman-wrapper">
            <div id="josman-header">

                <div style="position:absolute;  min-height:100px; min-width:100%; ">
                    <a id="josman-program-logo-link" href="../index.html">
                        <img id="josman-program-logo" src="../img/divercli-200px.png" alt="program logo">    
                    </a>

                    <a id="josman-repo-link" href="../index.html">DiverCLI</a>
					
					<div id="josman-dev-warning">WARNING: THIS DOCUMENTATION IS <br>ABOUT  UNRELEASED SOFTWARE <br>THAT CAN CHANGE ANYTIME</div>
					
                    <a id="josman-org-logo-link" href="http://kidf.eu" target="_blank" title="KiD Foundation">
                        <img id="josman-org-logo" src="../img/org-200px.png" alt="organization logo">                        
                    </a>
					

                    <div id="josman-nav-header">
                        <a id="josman-home" href="../index.html">Home</a>                        
                        <span id="josman-usage" style="margin-left:15px">Usage:                        
                            
                            
                        <a class="josman-version-tab-header josman-tag-selected" href="../0.1/index.html">0.1</a></span>
                        <span style="margin-left:35px">
                            <a id="josman-project" class="josman-external-link" href="https://github.com/diversicon-kb/divercli" target="_blank">Github</a>
                            <a id="josman-wiki" class="josman-external-link" href="https://github.com/diversicon-kb/divercli/wiki" target="_blank">Wiki</a> 
                        </span>
                    </div>
                </div>                

            </div>

            <div id="josman-sidebar">
                <div id="josman-internal-sidebar" class="josman-sidebar-block"><ul class="josman-tree"><li><div class="josman-sidebar-page-title josman-sidebar-selected">Usage</div><ul class="josman-tree"><div><a href="#install">Install</a></div><div><a href="#getting-started">Getting started</a></div><div><a href="#your-first-project">Your first project</a></div><div><a href="#empty-databases">Empty databases</a></div><div><a href="#more-info">More info</a></div></ul></li><li><div class="josman-sidebar-page-title"><a href="Commands.html">Commands</a></div><ul class="josman-tree"></ul></li><li><div class="josman-sidebar-page-title"><a href="Tools.html">Tools</a></div><ul class="josman-tree"></ul></li><li><div class="josman-sidebar-page-title"><a href="Developers.html">Developers</a></div><ul class="josman-tree"></ul></li><li><div class="josman-sidebar-page-title"><a href="Configuration.html">Configuration</a></div><ul class="josman-tree"></ul></li><li><div class="josman-sidebar-page-title"><a href="CHANGES.html">Release notes</a></div><ul class="josman-tree"></ul></li></ul></div>



                <div id="josman-sidebar-managed-block" class="josman-sidebar-block">

                    <div id="josman-javadoc-link" class="josman-sidebar-page-title"><a class="josman-external-link" href="javadoc/index.html" target="_blank">Javadoc</a></div>
                    <!-- <div><a href="CHANGES.html">Release notes</a></div> -->              
                </div>


            </div>

            <div id="josman-content">
                <div id="josman-internal-content">
<p>This release allows to perform basic import / export of XML in <a href="http://diversicon-kb.eu/manual/diversicon-core/DiversiconLMF.html" target="_blank">Diversicon LMF</a> format and SQL dumps. Some function to query db metadata and import log is also provided.</p>
<h3><a href="#install" id="install">Install</a></h3>
<p>You can download Diver CLI <a href="../releases/download/divercli-0.1.0/divercli-0.1.0.zip" target="_blank"> from here</a>, then unzip somewhere on your system. In case updates are available, version numbers follow <a href="http://semver.org/" target="_blank">semantic versioning</a> rules.</p>
<p><strong>NOTE: This manual assumes you have added <code>bin/divercli</code> to the path of your shell,<br>
see <a href="INSTALL.txt" target="_blank">INSTALL.txt</a> instructions.</strong></p>
<h3><a href="#getting-started" id="getting-started">Getting started</a></h3>
<p>To see usage commands:</p>
<p>In Linux / Mac, from terminal just type:</p>
<pre><code>bin/divercli
</code></pre>
<p>In Windows, click on Start menu, run command <code>cmd</code> and in the console type:</p>
<pre><code>bin\divercli.bat
</code></pre>
<h3><a href="#your-first-project" id="your-first-project">Your first project</a></h3>
<p>In DiverCli, a project is a folder with configuration for connecting to a database, plus possibly the database itself and other custom scripts. It might look like this:</p>
<pre><code>divercli.ini
my-diversicon.db.h2
my-script.sql
 . 
 .
 .

</code></pre>
<p>DiverCli comes with full support for <a href="http://h2database.com" target="_blank">H2 database</a>, which is shipped with DiverCli and doesn't require separate installation (for info on browsing databases, see <a href="Tools.html#h2">Tools page</a>).</p>
<p>Let's create our first H2 file-based database with Wordnet 3.1 inside:</p>
<pre><code class="language-bash">&gt; divercli --prj wn31 init --db classpath:/div-wn31.h2.db.xz

Restoring database:   classpath:/div-wn31.h2.db.xz
                to:   wn31/wn31.h2.db  ...
Database created in 15 secs

</code></pre>
<p>In detail:</p>
<ul>
<li><code>--prj wn31</code> tells DiverCLI in which folder to put the project</li>
<li><code>init</code> is the actual comand given to DiverCli</li>
<li><code>--db</code> specifies to <code>init</code> command where to take the db. In this case Wordnet 3.1 is pre-packaged in the DiverCLI distribution so we picked it with the special URL beginning with <code>classpath:</code></li>
</ul>
<p>Notice that <code>--prj</code> always goes <em>before</em> commands.</p>
<p>These files were generated:</p>
<pre><code>&gt; cd wn31
&gt; dir

divercli.ini  wn31.h2.db

        
</code></pre>
<p>The file <code>divercli.ini</code> tells DiverCli where to connect when we launch the tool from the project directory. In this particular case the database is in the same folder, but it could be anywhere, even a remote connection.</p>
<p>You can check things are working by issuing the <code>log</code> command, which will show a status of the database and a log of the imports done so far. Notice the first import is always the <a href="https://github.com/diversicon-kb/diversicon-model/blob/master/src/main/resources/div-upper.xml"><code>div-upper</code></a> lexical resource:</p>
<pre><code class="language-bash">&gt; divercli log

Connecting to database   jdbc:h2:file:wn31
Connected!

Schema version: 1.0   Data version: -

Name        : div-upper
Prefix      : div
Import id   : 2
Namespace   : https://github.com/diversicon-kb/diversicon-model/blob/master/src/main/resources/div-upper.xml
From file   : classpath:/div-upper.xml
Imported by : Diversicon
Started     : 2017-02-24 09:26:17
Ended       : 2017-02-24 09:26:18
Duration    : 1 sec

Name        : div-wn31
Prefix      : wn31
Import id   : 3
Namespace   : https://github.com/diversicon-kb/diversicon-wordnet-3.1
From file   : /home/david.leoni/Da/prj/divmaker/dumps/diversicon/div-wn31.xml
Imported by : David Leoni
Started     : 2017-02-24 09:26:39
Ended       : 2017-02-24 09:35:01
Duration    : 8 mins, 21 secs
Import for making Wordnet 3.1 Diversicon distribution



Disconnected.

</code></pre>
<p>We can now try to import the lexical resource <code>smartphones.xml</code>, which depends upon the already imported Wordnet:</p>
<pre><code class="language-bash">&gt; divercli import-xml --author "John Doe" --description "Some test import" classpath:/smartphones.xml

Connecting to database   jdbc:h2:file:wn31
Connected!
Going to import 1 files by import author John Doe...
Loading LMF : classpath:/smartphones.xml ...

Validating XML Schema of /tmp/extracted3057853183437278765/smartphones.xml   ...

XML is valid!

Checking XML external references against the database ...

Validating import data against the db....
XML can be merged!


Starting import...

Done loading LMF : classpath:/smartphones.xml .

Executing post-import db validation ... 

DB is valid!

   Elapsed time: 2 secs

Normalizing SynsetRelations...

Found 117796 synsets.

SynsetRelation normalization - processed synsets: 10,000
SynsetRelation normalization - processed synsets: 20,000
SynsetRelation normalization - processed synsets: 30,000
SynsetRelation normalization - processed synsets: 40,000
SynsetRelation normalization - processed synsets: 50,000
SynsetRelation normalization - processed synsets: 60,000
SynsetRelation normalization - processed synsets: 70,000
SynsetRelation normalization - processed synsets: 80,000
SynsetRelation normalization - processed synsets: 100,000

Done normalizing SynsetRelations.

   No edges were added to the 993,234 existing ones. 

   Elapsed time: 1 min, 36 secs

Computing transitive closure for SynsetRelations (may take some minutes) ...

   Found 993,234 synset relations.


   Elapsed time: 2 mins, 10 secs


Going to write closure into the db...


Done writing transitive closure for SynsetRelations.

   Max level:      13
   Initial edges:  993,234
   Inserted edges: 60
        hypernym:   60

   Elapsed time:  0 secs

Elapsed time for import: 3 mins, 49 secs   Started: 2017-03-06 08:53:48   Ended: 2017-03-06 08:57:38



Done importing 1 LMF by import author John Doe

Imported lexical resources: 

    div-smartphones    from    classpath:/smartphones.xml

Disconnected.

</code></pre>
<p>After the import we can check the log:</p>
<pre><code class="language-bash">&gt; divercli log

Connecting to database   jdbc:h2:file:wn31
Connected!

Schema version: 1.0   Data version: -

Name        : div-upper
Prefix      : div
Import id   : 2
Namespace   : https://github.com/diversicon-kb/diversicon-model/blob/master/src/main/resources/div-upper.xml
From file   : classpath:/div-upper.xml
Imported by : Diversicon
Started     : 2017-02-24 09:26:17
Ended       : 2017-02-24 09:26:18
Duration    : 1 sec

Name        : div-wn31
Prefix      : wn31
Import id   : 3
Namespace   : https://github.com/diversicon-kb/diversicon-wordnet-3.1
From file   : /home/david.leoni/Da/prj/divmaker/dumps/diversicon/div-wn31.xml
Imported by : David Leoni
Started     : 2017-02-24 09:26:39
Ended       : 2017-02-24 09:35:01
Duration    : 8 mins, 21 secs
Import for making Wordnet 3.1 Diversicon distribution

Name        : div-smartphones
Prefix      : sm
Import id   : 4
Namespace   : https://github.com/diversicon-kb/diversicon-model/blob/master/src/main/resources/smartphones.xml
From file   : classpath:/smartphones.xml
Imported by : John Doe
Started     : 2017-03-06 08:53:48
Ended       : 2017-03-06 08:53:48
Duration    : 0 secs
Some test import



Disconnected.

</code></pre>
<h3><a href="#empty-databases" id="empty-databases">Empty databases</a></h3>
<p>If instead of Wordnet you want to start with an empty database, you can create an empty database for example in directory <code>myprj</code> by issuing <code>divercli --prj myprj init</code>. Note that the system will always preload in the db the lexical resource <code>DivUpper</code>:</p>
<pre><code class="language-bash">&gt; divercli --prj myprj init

Recreating tables in database  jdbc:h2:file:myprj/myprj ...

</code></pre>
<pre><code class="language-bash">&gt; cd myprj
&gt; dir

divercli.ini  myprj.h2.db  myprj.lock.db  myprj.trace.db

</code></pre>
<pre><code class="language-bash">&gt; divercli log

Connecting to database   jdbc:h2:file:myprj
Connected!

Schema version: 1.0   Data version: -

Name        : div-upper
Prefix      : div
Import id   : 2
Namespace   : https://github.com/diversicon-kb/diversicon-model/blob/master/src/main/resources/div-upper.xml
From file   : classpath:/div-upper.xml
Imported by : Diversicon
Started     : 2017-03-06 08:57:46
Ended       : 2017-03-06 08:57:47
Duration    : 0 secs



Disconnected.

</code></pre>
<h3><a href="#more-info" id="more-info">More info</a></h3>
<p>You can learn more about handling XMLs in <a href="Commands.html">Commands</a> page. In <a href="Configuration.html">Configuration</a> you can read about global and per-project configuration, and logging.</p>
</div>
            </div>

        </div>        
        <script src="../js/jquery-1.11.2.min.js"></script>
        <!-- <script src="../js/bootstrap-3.3.4.min.js"></script> -->

        <!-- quick and silly hack to get the file -->
        <script src="website-template/js/jquery-1.11.2.min.js"></script>
        <!-- quick and silly hack to get the file -->
        <script src="website-template/js/jquery-3.3.4.min.js"></script>
        <script>
            // idotic CSS in style doesn't work, so use jquery instead: 
            // also would like pre code but this will select code and won't work. There aren't selectors for parents

            $("pre").css("max-width", "680px").css("overflow-x", "auto");

            /* We don't support this yet...
             $('.josman-tree-toggle').click(function () {
             $(this).parent().children('ul.tree').toggle(200);
             return false;
             });
             */
        </script>
    </body>
</html>
